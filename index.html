<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>單字測驗</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>單字測驗通</h1>
            <nav>
                <span id="user-display"></span>
                <!-- [新增] 單字本連結 -->
                <a href="vocab-book.html">單字本</a>
                <a href="stats.html">測驗統計</a>
                <button id="logout-btn">登出</button>
            </nav>
        </header>

        <main id="quiz-container">
            <!-- 設定畫面 -->
            <section id="setup-screen">
                <h2>測驗設定</h2>
                <div class="form-group">
                    <label for="topic-select">選擇主題 (熟練度)：</label>
                    <select id="topic-select">
                        <option value="all">所有單字</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="mode-select">選擇模式：</label>
                    <select id="mode-select">
                        <option value="normal">一般模式</option>
                        <option value="incorrect">錯題模式</option>
                        <option value="challenge">挑戰模式 (30秒)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="question-count-input">測驗題數 (留空則為全部)：</label>
                    <input type="number" id="question-count-input" placeholder="例如：20" min="1">
                </div>
                <button id="start-btn">開始測驗</button>
            </section>

            <!-- 測驗畫面 -->
            <section id="quiz-screen" class="hidden">
                <div id="timer" class="hidden">時間剩餘: <span id="time-left">30</span> 秒</div>
                <div class="progress-bar">
                    <div id="progress-bar-fill"></div>
                </div>
                <p id="progress-text">第 1 / N 題</p>
                <div class="question-card">
                    <p id="definition-display">中文解釋會顯示在這裡。</p>
                    <div class="input-group">
                        <input type="text" id="answer-input" placeholder="請拼出英文單字..." autocomplete="off">
                    </div>
                    <p id="feedback" class="feedback"></p>
                </div>
                 <button id="next-btn" class="hidden">下一題</button>
            </section>
            
            <!-- 結果畫面 -->
            <section id="result-screen" class="hidden">
                <h2>測驗結束！</h2>
                <p>分數: <span id="score">0</span></p>
                <p>正確率: <span id="accuracy">0</span>%</p>
                <div class="result-buttons">
                    <button id="restart-btn">返回主畫面</button>
                    <a href="stats.html" class="button-link">查看詳細統計</a>
                </div>

                <div id="quiz-review-container">
                    <h3>本次測驗回顧</h3>
                    <table id="review-table">
                        <thead>
                            <tr>
                                <th>單字</th>
                                <th>您的答案</th>
                                <th>結果</th>
                                <th>發音</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>

    <!-- Project Scripts -->
    <script src="firebase-config.js"></script>
    <script src="auth.js"></script>
    <script src="script.js"></script>
</body>
</html>